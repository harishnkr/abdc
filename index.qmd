---
title: "ABDC Ranking List"
author: "K. Harishankar"
format: html
execute: 
  echo: false
---

```{r}
# load required packages
library(reactable)
library(reactablefmtr)  # for color scales & tooltips
library(htmltools)

# read CSV
df <- read.csv("data/journals.csv", stringsAsFactors = FALSE)

# clean / reformat column names
names(df) <- c(
  "Title",
  "Publisher",
  "Field",
  "Rating",
  "ISSN",
  "ISSN Online",
  "Website"
)

df_display <-  df[, !names(df) %in% c("ISSN", "ISSN Online", "Website")]

# render enhanced reactable
reactable(
  df_display,
  searchable = TRUE,             # global search bar
  pagination = TRUE,
  highlight = TRUE,
   elementId = "journals-select",
  striped = TRUE,
  compact = TRUE,
  resizable = TRUE,               # allow resizing columns
  filterable = TRUE,              # per-column filter box
  sortable = TRUE,                # sortable columns
  defaultSortOrder = "asc",
  showPageSizeOptions = TRUE,     # user can change rows per page
  defaultPageSize = 25,
  pageSizeOptions = c(10, 25, 50, 100),
  bordered = TRUE,
  wrap = TRUE,
 columns = list(
  Rating = colDef(
    filterInput = function(values, name) {
      tags$select(
        onchange = sprintf(
          "Reactable.setFilter('journals-select', '%s', event.target.value || undefined)",
          name
        ),
        tags$option(value = "", "All"),
        lapply(unique(values), tags$option),
        "aria-label" = sprintf("Filter %s", name),
      )
    }
  ) ,
    Title = colDef(minWidth = 200),
    Publisher = colDef(minWidth = 150),
    Field = colDef(minWidth = 70),
    Rating = colDef(minWidth = 50)
  ), 
  theme = reactableTheme(
     headerStyle = list(
      whiteSpace = "normal",
      height = "3.5em",
      lineHeight = "1.2"
    ),
    borderColor = "#ddd",
    highlightColor = "#f0f8ff",
    stripedColor = "#f9f9f9"
  )
  
)
```